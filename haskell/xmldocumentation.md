
Йерархична база данни (XML)
---------------------------

Проектът е реализация на система за работа с йерархична база данни, изразена чрез XML. В памета структурата на базата данни се представя като **кореново дърво**, където коренът е най-външният XML таг.

### Организация на данните

**XML-таг** е един ред текст със следния вид: `<tag {attribute="value" }>content</tag>`, където:

  * **tag** задължително присъства и е символен низ съставен само от букви `[a-zA-Z]` (без празни пространства). Всеки *XML-таг* започва с отварящ `<tag>` и завършва със затварящ таг `</tag>`.
  * **{attribute="value"}** означава че тагът може да има 0 или повече двойки `attribute="value"` в отварящия таг, разделени с един празен интервал (e.g. `<img src="image.jpg" alt="myImage">content</img>`), където:

    * **attribute** e символен низ съставен само от букви `[a-zA-Z]`.
    * **value** е задължително заграден с кавички и освен букви може да съдържа празен интервал, препинателни знаци и цифри.

  * **content** може да бъде точно едно от следните 2 неща:

    * **текст** съставен от всякакви символи с изключение на `<` и `>`.
    * един или повече **XML-тагове** един след друг.

**XML-дърво** е кореново дърво, чиито върхове са XML-тагове. Дефиницията на **XML-таг** разбива множеството от върховете на дървото на два класа:

  * **листа**, които за **content** имат текст.
  * **междинни върхове** (възли), които са бащи на други върхове.

### Адресиране на елементите в базата

Адресирането на елементите в базата данни става чрез синтаксис подобен на XPath, който се с сътои от последователност от **селектори**, които филтрират елементите в йерархията ниво по ниво, стигайки до целта (на всяко ниво от дървото се режат неселектираните клони). Следват дефиниции, които определят синтаксиса на **адрес** на запис в базата данни или още казано **път** в XML-дървото:

**път**(адрес) е последователност от **селектори** разделени с наклонена черта `/` (e.g. `selector/selector/selector`). Пътят в XML-дървото винаги започва от корена, тоест най-въшния XML-таг. Така първият селектор филтрира децата на корена.

**селектор** в най-пълния си вид изглежда така `tag(attribute="value")[index]@attrValue`. Пълният селектор може да се използва само за **read** операции. Последователността **таг, филтър на атрибут, индекс, избор на атрибут** е строго фиксирана и трябва да се спазва, като:

  * `tag` - **таг**-ът в селектора винаги е задължителен и той определя кой XML-таг ще се избере на нивото, до което пътят е стигнал. Валиден при `CRUD` операции.
  * `(attribute="value")` - **филтър на атрибут** не е задължителен, винаги следва след **tag** в зададения **път** и филтрира избраните от **тага** елементи (XML-тагове), като за дадения `attribute` (атрибут) избраните елементи трябва да имат стойност `"value"`. Валиден при `CRUD` операции.
  * `[index]` - **индекс**-ът не е задължителен, винаги присъства веднага след **филтъра на атрибут** или веднага след **tag**, когато **филтърът на атрибут** липсва (e.g. `tag[index]`). Той определя кой XML-tag (единствен) ще избере пътят (адресът). Валиден при `_RUD` операции (без създаване).
  * `@attrValue` - **избор на атрибут** не е задължителен и винаги присъства след **индекса** или след **филтър на атрибут**, ако няма **индекс** (e.g. `tag(attribute="value")@attrValue`), или веднага след **tag**, когато няма нито **филтър на атрибут**, нито **индекс** в зададения път (адрес) (e.g. `tag@attrValue`). Валиден при `_R__` операции (само четене към момента).

### Операции

Следва описание на операциите, които могат да се извършват над базата данни.

**read path** - връща XML-дървото, което съответства на подадения път *path*, без странични ефекти
**create path** - добавя нови XML-тагове според зададения path
